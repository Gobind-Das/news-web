{% extends 'base.html' %}
{% load static %}

{% block title %}খবর - বঙ্গ বিদ্যার্থী নিউজ পোর্টাল{% endblock %}

{% block content %}
<div class="articles-container">

    <!-- ================= CATEGORY HEADER ================= -->
    {% if current_category %}
    <div class="category-header">
        <h2>{{ articles.0.category.name }}</h2>
        <p class="category-description">{{ articles.0.category.description }}</p>
    </div>
    {% else %}
    <div class="category-header">
        <div class="header-with-logo">
            <img src="{% static 'images/logo1.jpeg' %}" alt="বঙ্গ বিদ্যার্থী লোগো" class="header-logo">
        </div>
        <p class="category-description">সপশ্চিমবঙ্গের জাতীয়তাবাদী ছাত্র সংগঠন অখিল ভারতীয় বিদ্যার্থী পরিষদের মুখপত্র 'বঙ্গ বিদ্যার্থী'। এই পত্রিকা একটি মাসিক বাংলা পত্রিকা। ভারতরাষ্ট্রকে পুনঃনির্মাণ করতে দৃঢ় সংকল্পবদ্ধ হয়ে ১৯৪৯ সাল থেকে কাজ করে আসছে এবিভিপি। সামাজিক দায়িত্বশীল ছাত্র সংগঠন হিসেবে শিক্ষা বিষয়ক নানা দাবি দাওয়াকে সামনে রেখে ছাত্র অধিকার রক্ষায় কাজ করে এবিভিপি। ছাত্র জীবনে দেশমাতৃকার বন্দনা এবং রাষ্ট্র ভক্তিই মূল আদর্শ। শিক্ষা হবে দেশের প্রত্যেক নাগরিকের জন্য। শিক্ষা হবে আনন্দময় স্বার্থক জীবন। শিক্ষার যোগ্যতায় মিলবে কাজ। নব্বইয়ের দশক থেকে বঙ্গ বিদ্যার্থী পত্রিকা পশ্চিমবঙ্গে প্রকাশ হচ্ছে। এবার থেকে এই পত্রিকা ডিজিটাল মাধ্যমে প্রকাশিত হবে। সমৃদ্ধ ভারতের সঙ্গে সমৃদ্ধ পশ্চিমবঙ্গ একান্ত প্রয়োজন। পশ্চিমবঙ্গকে উজ্জ্বল ভবিষ্যতের দিকে নিয়ে যাওয়াই আমাদের প্রধান সংকল্প।ইতিহাস, সাহিত্য, ধর্ম, দর্শন, অধ্যাত্মবাদে পশ্চিমবঙ্গে যথার্থ ভারতকে অন্বেষণ করাই আমাদের প্রধান কাজ।</p>
    </div>
    {% endif %}

    <!-- ================= ARTICLES GRID ================= -->
    {% if articles %}
    <div class="articles-grid">
        {% for article in articles %}
        <article class="article-card">
            {% if article.featured_image %}
            <a href="{% url 'news:article_detail' article.slug %}" class="article-image-link">
                <img src="{{ article.featured_image.url }}" alt="{{ article.title }}" class="article-image">
            </a>
            {% endif %}

            <div class="article-body">
                <!-- Category Badge -->
                <a href="{% url 'news:article_by_category' article.category.slug %}" class="article-category-badge">
                    {{ article.category.name }}
                </a>

                <!-- Article Title -->
                <h3 class="article-title">
                    <a href="{% url 'news:article_detail' article.slug %}">{{ article.title }}</a>
                </h3>

                <!-- Article Summary -->
                <p class="article-summary">{{ article.summary|truncatewords:35 }}</p>

                <!-- Meta Info -->
                <div class="article-meta">
                    <span class="article-date">
                        <i class="fas fa-calendar-alt"></i>
                        {{ article.published_at|date:"d M, Y" }}
                    </span>
                    <span class="article-author">
                        <i class="fas fa-user"></i>
                        {{ article.author.first_name|default:article.author.username }}
                    </span>
                    <span class="article-views">
                        <i class="fas fa-eye"></i>
                        {{ article.views }}
                    </span>
                </div>

                <!-- Read More Button -->
                <a href="{% url 'news:article_detail' article.slug %}" class="read-more-btn">
                    আরও পড়ুন <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </article>
        {% endfor %}
    </div>

    <!-- ================= PAGINATION ================= -->
    {% if is_paginated %}
    <div class="pagination">
        {% if page_obj.has_previous %}
        <a href="?page=1{% if search_query %}&q={{ search_query }}{% endif %}" class="page-link first">প্রথম</a>
        <a href="?page={{ page_obj.previous_page_number }}{% if search_query %}&q={{ search_query }}{% endif %}" class="page-link prev">পূর্ববর্তী</a>
        {% endif %}

        {% for num in page_obj.paginator.page_range %}
        {% if page_obj.number == num %}
        <span class="page-link current">{{ num }}</span>
        {% elif num > page_obj.number|add:-3 and num < page_obj.number|add:3 %}
        <a href="?page={{ num }}{% if search_query %}&q={{ search_query }}{% endif %}" class="page-link">{{ num }}</a>
        {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}{% if search_query %}&q={{ search_query }}{% endif %}" class="page-link next">পরবর্তী</a>
        <a href="?page={{ page_obj.paginator.num_pages }}{% if search_query %}&q={{ search_query }}{% endif %}" class="page-link last">শেষ</a>
        {% endif %}
    </div>
    {% endif %}

    {% else %}
    <!-- ================= EMPTY STATE ================= -->
    <div class="no-articles">
        <i class="fas fa-inbox empty-icon"></i>
        <h3>কোন খবর পাওয়া যায়নি</h3>
        <p>আপনার অনুসন্ধান সামঞ্জস্য করে চেষ্টা করুন বা অন্য ক্যাটাগরি ব্রাউজ করুন।</p>
        <a href="{% url 'news:article_list' %}" class="btn-back-home">হোমে ফিরুন</a>
    </div>
    {% endif %}
</div>
{% endblock %}
